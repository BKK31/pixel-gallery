> Project name: Lumina Gallery
Platform: Android (Flutter)
Current status: Working prototype, media loading + viewer in progress
Last active date: 17 Dec 2025
Development style: Learning-first, architecture-aware, no blind copy-paste




---

1. Project Intent (Why this exists)

Lumina Gallery is a fast, offline, privacy-first Android gallery app inspired by:

Google Gallery Go

Aves Gallery

Google Photos (UX inspiration only)


Key goals:

No cloud, no tracking

Works on low-end devices

Supports Photos, Videos, Motion Photos

Predictable editing & viewing behavior



---

2. Technology Stack

Flutter (UI)

photo_manager (media access)

photo_manager_image_provider (thumbnails & previews)

permission_handler (Android permissions)

shared_preferences (settings persistence)


Development environment:

VS Code

CLI tooling

Physical Android device preferred (emulator unreliable)



---

3. Locked-In Architectural Rules (Important)

3.1 Layer separation (non-negotiable)

UI Layer (Widgets)

Handles layout, gestures, navigation

Owns scroll controllers & UI state

Calls services


Examples:

PhotosScreen

ViewerScreen

AlbumsScreen

SettingsScreen



---

Service Layer (Pure Dart)

Handles permissions

Talks to photo_manager

Implements paging

Returns data only


Rules:

âŒ Must NOT extend Widget

âŒ Must NOT use setState

âŒ Must NOT show toasts/dialogs


Example:

MediaService



---

Model Layer

Plain data objects

No logic


Example:

PhotoModel {
  uid
  AssetEntity asset
  DateTime timeTaken
  bool isVideo
}


---

4. What Is Already Implemented âœ…

4.1 App Structure & Navigation

MaterialApp root

BottomNavigationBar:

Photos

Albums


Viewer navigation using MaterialPageRoute

Back gesture & system back working



---

4.2 Photos Screen (Grid View)

Grid layout (4 columns)

Real thumbnails using AssetEntityImage

Scrollbar added

Tap â†’ ViewerScreen

Supports both photos and videos

Video thumbnails show play icon (in progress / partially)



---

4.3 Viewer Screen

Full-screen black background

Swipe left/right using PageView

Initial index passed correctly

UI overlay toggle on tap

Page indicator (current index + 1)

Full-resolution preview (isOriginal: true)

Viewer does NOT reload media (correct decision)



---

4.4 Permissions

Runtime permission handling works

PhotoManager.requestPermissionExtend() used

Confirmed working on real device



---

4.5 Settings Screen

Implemented as a separate screen

Uses shared_preferences

Options:

Material You toggle

Default startup page (Photos / Albums)


Settings load on init

Settings persist across app restarts



---

4.6 Models

PhotoModel correctly introduced

Encapsulates:

AssetEntity

uid

timeTaken

isVideo




---

5. Directory Structure (Current)

lib/
â”œâ”€â”€ main.dart
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ photo_model.dart
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ media_service.dart   // currently being refactored
â”‚
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ photos_screen.dart
â”‚   â”œâ”€â”€ albums_screen.dart
â”‚   â”œâ”€â”€ viewer_screen.dart
â”‚   â””â”€â”€ settings_screen.dart
â”‚
â””â”€â”€ utils/
    â””â”€â”€ (reserved for future helpers)


---

6. Media Loading Strategy (Current State)

What works

Permissions

Asset access

Thumbnail rendering

Viewer preview


What is partially implemented / in progress

Infinite scroll (paging)

Stable thumbnail caching

Proper reuse of grid cells



---

7. Known Issues (As of Now)

7.1 MediaService problems (currently being fixed)

âŒ Incorrectly implemented as StatefulWidget

âŒ Mixed UI logic (setState, toasts)

âŒ Nested functions inside methods

âŒ Paging state unclear


Decision:
MediaService will be rewritten as a plain Dart class.


---

7.2 Thumbnail Issues

Some video thumbnails break on scroll

Cause:

Heavy thumbnail extraction

Large thumbnail size

GridView rebuild behavior



Fix direction:

Smaller thumbnails for videos

Stable keys

Paging



---

7.3 Paging Incomplete

Only first N assets load

Scroll triggers rebuild but not load-more correctly



---

8. Decisions Already Finalized ðŸ”’

ViewerScreen receives photo list via constructor

ViewerScreen does NOT fetch media

MediaService is single source of truth for paging

No ML categorization in MVP

Motion Photos will be added after core stability



---

9. APK Size Observation

Debug APK â‰ˆ 160 MB

Explanation:

Debug symbols

Unstripped Flutter engine


Expected Release APK:

~20â€“40 MB




---

10. Current Development Focus (Next Immediate Steps)

Priority order

1. Refactor MediaService (plain class)


2. Infinite scroll (paging)


3. Stable thumbnails


4. Correct ordering:

Photos â†’ newest first

Albums â†’ A â†’ Z





---

11. Upcoming Features (Planned, Not Started)

Albums grid using AssetPathEntity

Bottom overlay actions in Viewer:

Share

Favorite

Delete (soft delete â†’ recycle bin)


Metadata bottom sheet (swipe up)

Motion Photo detection & playback



---

12. Learning Milestones Achieved ðŸ§ 

Understood Flutter rebuild behavior

Understood GridView lifecycle

Learned why caching â€œfeels brokenâ€

Stopped reloading data in Viewer

Shifted from â€œvibe codingâ€ â†’ architectural thinking



---

13. Timeline Reality Check

Working prototype by Dec 21 â†’ realistic

Core functionality > UI polish

Motion Photos may land near the end of MVP



---

14. Final Note

This project is no longer about Flutter syntax.

It is now about:

Data flow

UI lifecycle

Performance trade-offs

Real-world gallery behavior


